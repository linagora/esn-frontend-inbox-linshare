# esn-frontend-inbox-linshare

LinShare plugin for OpenPaaS Unified Inbox module

## How to connect Linshare to Inbox using JWT

From the Administration Center/JWT (platform administration mode), you can generate a public key.

> - OpenPaaS generate PEM format

This key must be stored in LinShare with the good issuer. 

> - LinShare supports two public keys formats : SSH and PEM. 

For that you can use this CURL with the public key generated by OpenPaaS:

```
curl -X POST -H 'Accept: application/json' -H 'Content-Type: application/json'  http://0.0.0.0:30000/linshare/webservice/rest/admin/public_keys -u "ADMIN_USERNAME:PASSWORD"  -d '{
    "domainUuid" : "LinShareRootDomain",
    "issuer" : "linagora.esn.linshare",
    "publicKey" : " ",
    "format" : "PEM"
}'
```

> **PS**  You need to use ``` \n ``` to attach the lines of the public key in the PEM format.

**To test the connector u need to have the same user in the two domains of OpenPaaS and LinShare.**

## Running tests

You can run tests by executing the following command:

```sh
npm run test
```

Note that there is a 10000ms timeout by default. If you want to change that, simply pass the **TEST_TIMEOUT** environment variable:

```sh
TEST_TIMEOUT=2000 npm run test
```